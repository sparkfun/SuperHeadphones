
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A tutorial for hacking your own headphones with ambient mics for loud environments.">
      
      
        <meta name="author" content="SparkFun Electronics">
      
      
        <link rel="canonical" href="https://sparkfun.github.io/SuperHeadphones/single_page/">
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/img/sfe_logo_sq.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4+insiders-4.53.15">
    
    
      
        <title>Hardware Overview - Super Headphones Hookup Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f15084e1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775m1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25m13.274 9.537zl-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074M4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5M4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13M6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75M8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.307 5.476c-.756.134-1.975-.615-2.59-1.362-.755-.922-.66-1.647-.071-2.29.883-.978 2.396-.6 2.396-.6s-2.772-2.432-5.658-.44c-2.571 1.77-1.833 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.443-.184-2.034-1.343-1.687-2.054.298-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044c-1.259.474-2.297 1.515-2.214 4.12V24s1.301-1.604 2.83-3.236c1.714-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.371-3.645 3.141-4.563.67-9.68-1.43-10.343 0 0 .34 1.438-.745 1.638"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13M6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.76 2.76 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6 6 0 0 0-.26.16 1 1 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1 1 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.61.61 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1 1 0 0 0-.34.398M9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0M9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343za8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746m1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275M6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.75.75 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L6.94 8 4.97 6.03a.75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.25 1.25 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005 0-.009.004"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.5 3.5 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327q0 .15-.025.292c.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5q-.002.615-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A5 5 0 0 1 8 16a5 5 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5 5 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.7 1.7 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06m.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.17.17 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5m4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5m0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5M2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0"/></svg>');--md-admonition-icon--github:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>');--md-admonition-icon--arduino:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.087 6.146c-.3 0-.607.017-.907.069-2.532.367-4.23 2.239-5.18 3.674-.95-1.435-2.648-3.307-5.18-3.674a6.5 6.5 0 0 0-.907-.069C2.648 6.146 0 8.77 0 12s2.656 5.854 5.913 5.854c.3 0 .607-.017.916-.069 2.531-.376 4.23-2.247 5.18-3.683.949 1.436 2.647 3.307 5.18 3.683.299.043.607.069.915.069C21.344 17.854 24 15.23 24 12s-2.656-5.854-5.913-5.854M6.53 15.734a4 4 0 0 1-.625.043c-2.148 0-3.889-1.7-3.889-3.777 0-2.085 1.749-3.777 3.898-3.777q.312.002.624.043c2.39.35 3.847 2.768 4.347 3.734-.508.974-1.974 3.384-4.355 3.734m11.558.043c-.208 0-.416-.017-.624-.043-2.39-.35-3.856-2.768-4.347-3.734.491-.966 1.957-3.384 4.347-3.734q.312-.041.624-.043c2.149 0 3.89 1.7 3.89 3.777 0 2.085-1.75 3.777-3.89 3.777m1.65-4.404v1.134h-1.205v1.182h-1.156v-1.182H16.17v-1.134h1.206V10.19h1.156v1.183zM4.246 12.498H7.82v-1.125H4.245v1.125z"/></svg>');--md-admonition-icon--python:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>');--md-admonition-icon--code:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16zM64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zm96-34c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg>');--md-admonition-icon--terminal:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25Zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25ZM7.25 8a.75.75 0 0 1-.22.53l-2.25 2.25a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L5.44 8 3.72 6.28a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l2.25 2.25c.141.14.22.331.22.53m1.5 1.5h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5"/></svg>');--md-admonition-icon--serial:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h176l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32h256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-69.3L336 416h176c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm448 64v288H64V64z"/></svg>');--md-admonition-icon--hot:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.66 11.2c-.23-.3-.51-.56-.77-.82-.67-.6-1.43-1.03-2.07-1.66C11.33 7.26 11 4.85 11.95 3c-.95.23-1.78.75-2.49 1.32-2.59 2.08-3.61 5.75-2.39 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.23.1-.47.04-.66-.12a.6.6 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C3.78 10 2.87 12.3 3 14.47c.06.5.12 1 .29 1.5.14.6.41 1.2.71 1.73 1.08 1.73 2.95 2.97 4.96 3.22 2.14.27 4.43-.12 6.07-1.6 1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6-1.12.4-2.24-.16-2.9-.82 1.19-.28 1.9-1.16 2.11-2.05.17-.8-.15-1.46-.28-2.23-.12-.74-.1-1.37.17-2.06.19.38.39.76.63 1.06.77 1 1.98 1.44 2.24 2.8.04.14.06.28.06.43.03.82-.33 1.72-.93 2.27M21 13h-2V7h2zm0 4h-2v-2h2z"/></svg>');--md-admonition-icon--link:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018 2 2 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042m-4.69 9.64a2 2 0 0 0 2.83 0l1.25-1.25a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .75.75 0 0 1-.018 1.042.75.75 0 0 1-1.042.018 2 2 0 0 0-2.83 0l-2.5 2.5a2 2 0 0 0 0 2.83"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/timeago.css">
    
      <link rel="stylesheet" href="../stylesheet/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-7Y7EYCZVC1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-7Y7EYCZVC1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-7Y7EYCZVC1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#background" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://www.sparkfun.com" title="Super Headphones Hookup Guide" class="md-header__button md-logo" aria-label="Super Headphones Hookup Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Super Headphones Hookup Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hardware Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="red"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sparkfun/SuperHeadphones" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sparkfun/SuperHeadphones
  </div>
</a>
      </div>
    
  </nav>
  
    
      <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Navigation tabs -->
<nav
  class="md-tabs"
  aria-label="Tabs"
  data-md-component="tabs"
>
  <div class="md-tabs__inner md-grid">

    <!-- Adds tab on right side of header -->
    
    <ul class="md-tabs__list" style="float: right;">
      <li class="md-tabs__item">
        <a href="/SuperHeadphones/hard_copy/" class="md-tabs__link">
          Hard Copies 🖨️
        <!-- &nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21.5c-1.35-.85-3.8-1.5-5.5-1.5-1.65 0-3.35.3-4.75 1.05-.1.05-.15.05-.25.05-.25 0-.5-.25-.5-.5V6c.6-.45 1.25-.75 2-1 1.11-.35 2.33-.5 3.5-.5 1.95 0 4.05.4 5.5 1.5 1.45-1.1 3.55-1.5 5.5-1.5 1.17 0 2.39.15 3.5.5.75.25 1.4.55 2 1v14.6c0 .25-.25.5-.5.5-.1 0-.15 0-.25-.05-1.4-.75-3.1-1.05-4.75-1.05-1.7 0-4.15.65-5.5 1.5M12 8v11.5c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5V7c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5m1 3.5c1.11-.68 2.6-1 4.5-1 .91 0 1.76.09 2.5.28V9.23c-.87-.15-1.71-.23-2.5-.23q-2.655 0-4.5.84zm4.5.17c-1.71 0-3.21.26-4.5.79v1.69c1.11-.65 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24v-1.5c-.87-.16-1.71-.23-2.5-.23m2.5 2.9c-.87-.16-1.71-.24-2.5-.24-1.83 0-3.33.27-4.5.8v1.69c1.11-.66 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24z"/></svg> -->
        </a>
      </li>
    </ul>
    

    <!-- Original tabbed sections -->
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../introduction/" class="md-tabs__link">
          
  
  Project Guide

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../resources/" class="md-tabs__link">
        
  
    
  
  Resources

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../troubleshooting/" class="md-tabs__link">
          
  
  Support

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Determine base classes -->


  



<!-- Navigation -->
<nav
  class="md-nav md-nav--primary md-nav--lifted"
  aria-label="Navigation"
  data-md-level="0"
>

  <!-- Site title -->
  <!-- <label class="md-nav__title" for="__drawer">
    <a
      href="https://www.sparkfun.com"
      title="Super Headphones Hookup Guide"
      class="md-nav__button md-logo"
      aria-label="Super Headphones Hookup Guide"
      data-md-component="logo"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

    </a>
    Super Headphones Hookup Guide
  </label> -->
  <label class="md-nav__title" for="__drawer">
    <a
      href="https://www.sparkfun.com"
      title="sparkfun.com"
      class="md-nav__button md-logo"
      aria-label="SparkFun"
      data-md-component="logo"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

    </a>
    Super Headphones Hookup Guide
  </label>

  <!-- Repository information -->
  
    <div class="md-nav__source">
      <a href="https://github.com/sparkfun/SuperHeadphones" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sparkfun/SuperHeadphones
  </div>
</a>
    </div>
  

  <!-- Navigation list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Project Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Project Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Hardware Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Installing Arduino Libraries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Arduino Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../microphone_selection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Microphone Selection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../whats_next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    What's Next
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Resources
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Support
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Support
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../github/file_issue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Submit Issues
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../github/contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contribute
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    

    <!-- Add Hard Copies to NAV menu -->
    <li class="md-nav__item">
      <a href="/SuperHeadphones/hard_copy/" class="md-nav__link">
      <span class="md-ellipsis">
        Hard Copies 🖨️
        <!-- Hard Copies&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21.5c-1.35-.85-3.8-1.5-5.5-1.5-1.65 0-3.35.3-4.75 1.05-.1.05-.15.05-.25.05-.25 0-.5-.25-.5-.5V6c.6-.45 1.25-.75 2-1 1.11-.35 2.33-.5 3.5-.5 1.95 0 4.05.4 5.5 1.5 1.45-1.1 3.55-1.5 5.5-1.5 1.17 0 2.39.15 3.5.5.75.25 1.4.55 2 1v14.6c0 .25-.25.5-.5.5-.1 0-.15 0-.25-.05-1.4-.75-3.1-1.05-4.75-1.05-1.7 0-4.15.65-5.5 1.5M12 8v11.5c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5V7c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5m1 3.5c1.11-.68 2.6-1 4.5-1 .91 0 1.76.09 2.5.28V9.23c-.87-.15-1.71-.23-2.5-.23q-2.655 0-4.5.84zm4.5.17c-1.71 0-3.21.26-4.5.79v1.69c1.11-.65 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24v-1.5c-.87-.16-1.71-.23-2.5-.23m2.5 2.9c-.87-.16-1.71-.24-2.5-.24-1.83 0-3.33.27-4.5.8v1.69c1.11-.66 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24z"/></svg> -->
      </span>
      </a>
    </li>
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Background<a class="headerlink" href="#background" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headphones" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Headphones<a class="headerlink" href="#headphones" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-modification" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          The Modification<a class="headerlink" href="#the-modification" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#required-materials" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Required Materials<a class="headerlink" href="#required-materials" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Tools<a class="headerlink" href="#tools" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suggested-reading" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Suggested Reading<a class="headerlink" href="#suggested-reading" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Hardware Overview<a class="headerlink" href="#hardware-overview" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hardware Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#block-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Block Diagram<a class="headerlink" href="#block-diagram" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exploded-view" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Exploded View<a class="headerlink" href="#exploded-view" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foam-removal" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Foam Removal<a class="headerlink" href="#foam-removal" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#screws" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Screws<a class="headerlink" href="#screws" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#knob-and-pcb-removal" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Knob and PCB removal<a class="headerlink" href="#knob-and-pcb-removal" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-pcb-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Custom PCB Assembly<a class="headerlink" href="#custom-pcb-assembly" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wiring-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Wiring Diagram<a class="headerlink" href="#wiring-diagram" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microphone-circuit" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Microphone Circuit<a class="headerlink" href="#microphone-circuit" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-arduino-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Installing Arduino Libraries<a class="headerlink" href="#installing-arduino-libraries" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing Arduino Libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arduino-ide" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Arduino IDE<a class="headerlink" href="#arduino-ide" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usb-to-serial-drivers" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          USB-to-Serial Drivers<a class="headerlink" href="#usb-to-serial-drivers" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wm8960-audio-codec" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          WM8960 Audio Codec<a class="headerlink" href="#wm8960-audio-codec" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#esp32-a2dp" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          ESP32-A2DP<a class="headerlink" href="#esp32-a2dp" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Arduino Code<a class="headerlink" href="#arduino-code" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-upload" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Serial Upload<a class="headerlink" href="#serial-upload" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wireless-connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Wireless connection<a class="headerlink" href="#wireless-connection" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diving-deeper" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Diving deeper<a class="headerlink" href="#diving-deeper" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microphone-selection" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Microphone Selection<a class="headerlink" href="#microphone-selection" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Microphone Selection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifications" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Specifications<a class="headerlink" href="#specifications" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Options<a class="headerlink" href="#options" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          What's next<a class="headerlink" href="#whats-next" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What's next">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mic-signal-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Mic Signal Output<a class="headerlink" href="#mic-signal-output" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-audio-processing" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Advanced Audio Processing<a class="headerlink" href="#advanced-audio-processing" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-mics" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Additional Mics<a class="headerlink" href="#additional-mics" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-3d-printed-cans" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Custom 3D Printed Cans!<a class="headerlink" href="#custom-3d-printed-cans" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Troubleshooting Tips<a class="headerlink" href="#troubleshooting-tips" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Resources:<a class="headerlink" href="#resources" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                

  




              
              <article class="md-content__inner md-typeset">
                

<!-- Adds file-eye icon to view hookup guide as a single page -->

    <a href="/SuperHeadphones/single_page" title="View as Single-Page" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>



                  
  



  
    <a href="https://github.com/sparkfun/SuperHeadphones/blob/main/docs/single_page.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12h8v2H8zm2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4zm-2-2h4.1l.9-.9V16H8zm12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<p>This tutorial will guide you through how to build your own wireless and/or wired headphones with ambient microphones. We start with some off-the-shelf headphones intended for use while lawn mowing, and then hack in some new electronics to allow wireless (BT), auxiliary 3.5mm TRS input, and stereo ambient microphones. The original purpose of this project was to make it easy and safe to play loud music with a rock band in the basement, however, the inclusion of the natural sounds around you into your listening experience can be useful in many other situations.</p>
<div align="center" class="grid cards">
<ul>
<li>
<p><a href="../assets/img/hp_rotate2.gif">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/hp_rotate2.gif" />
    </figure></p>
<hr />
<p><strong>Headphones with Ambient Mics</strong></a></p>
</li>
<li>
<p><center><a href="https://www.youtube.com/embed/NvHIXSyEeDA?start=499">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/NvHIXSyEeDA?start=499" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></center></p>
<hr />
<p><strong>Project Demo Video</strong></a></p>
</li>
</ul>
</div>
<h3 id="background">Background<a class="headerlink" href="#background" title="Permanent link"></a></h3>
<p>The first prototype design was sparked up around the time I was designing the <a href="https://www.sparkfun.com/products/20690">Qwiic Speaker Amp</a> in August of 2022. Now, over a year later, it has been through three major versions:</p>
<div align="center" class="grid cards">
<ul>
<li>
<p><a href="../assets/img/history1.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/history1_315wide.jpg" />
    </figure></p>
<hr />
<p><strong>August 2022 - "V1" Qwiic Speaker Amp</strong></a></p>
</li>
<li>
<p><a href="../assets/img/history2.jpg" >
    <figure markdown>
    <img alt="Headphones" src="../assets/img/history2_315wide.jpg" />
    </figure></p>
<hr />
<p><strong>November 2022 - "V2" WM8960 Codecs</strong></a></p>
</li>
<li>
<p><a href="../assets/img/history3.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/history3_315wide.jpg" />
    </figure></p>
<hr />
<p><strong>February 2023 - "V3" Custom PCB</strong></a></p>
</li>
</ul>
</div>
<p>With this project, I was trying to solve three problems:</p>
<ol>
<li>
<p>) I want to be able to lower all barriers to practicing music. The less things I have to set up, the better!</p>
</li>
<li>
<p>) When I play drums, I need to protect my ears from getting damaged from exposure to extremely loud sounds. To do this, I usually wear in-ear monitors (IEMs). IEMs are kind of like headphones, but they are more like earbuds. They are usually custom-molded to your ear canal. In this way, they are actually working much like ear plugs and blocking out loud sounds while still providing sound to your ears. In order to get a great monitor mix, I then need to set up mics and a sound mixer. You can accomplish this with headphones too, but most do not provide a safe amount of sound-isolation. IEMs are great, but they are also very expensive. They can range from $300 to $3,000.</p>
</li>
<li>
<p>) My eight year old son is playing loud music more and more (acoustic drums, amplified guitar and keyboards), and I want him to be able to protect his hearing while still being able to rock out and hear the music clearly. Over-the-ear hearing protection (aka “Ear Muffs”), do a great job of protecting your hearing, but they also dampen the sound way too much. In addition to missing out on many of the mid and high frequencies, it can be very difficult to hear your own instrument and even your band mates.</p>
</li>
</ol>
<p>My idea of a perfect solution:</p>
<ul>
<li>
<p>Over-the-ear headphones that have stereo ambient mics to mix in!</p>
</li>
<li>
<p>Very easy to “pop on”, with no cables attached. Nothing to wire up, just pop them on and go.</p>
</li>
<li>
<p>Mix in a desired level of the ambient mics using a single knob, essentially a “more ears” knob - right there on my headphones, at the ready to adjust as needed.</p>
</li>
<li>
<p>Battery powered, 100% self contained, wireless. During some jam sessions with the kiddos, we will quickly trade instruments. We need to be able to jump around the room, free from wires and/or plugging and unplugging things.</p>
</li>
<li>
<p>The ability to mix in a line level audio source (for practice tracks or other monitor signals from a mixer). This could come in handy for more advanced monitor sound system setups, where maybe I am getting a feed from the mixer that contains the rest of the musicians I am playing with.</p>
</li>
<li>
<p>And icing on the cake, a Bluetooth&reg; optional input. This last thing was really more useful for me during my solo practice sessions. I can load my phone up with my practice tracks and wirelessly connect to my headphones. Also, of course, useful for general listening.</p>
</li>
</ul>
<h3 id="headphones">Headphones<a class="headerlink" href="#headphones" title="Permanent link"></a></h3>
<p>For this project, we chose over-the-ear headphones that provide a large amount of sound dampening (30dB). These types of headphones are also called ear-muffs and are often marketed for use during loud construction work or lawn mowing.</p>
<p>The exact headphones we chose to start with were the following:</p>
<div style="text-align: center"><a href="https://www.amazon.com/Smoostart-Cancelling-Protection-Snowblowing-Construction/dp/B08M95FP4X" target="smoostart_headphone" class="md-button">Smoostart Am/Fm Radio Hearing Protector, Noise Reduction Safety Ear Muffs, 30dB Noise Canceling Ear Protection</a></div>

<p>When using this type of lawn-mowing headphones without any modification, they provide adequate sound dampening to protect your ears in extremely loud places. However, with this benefit, you also lose the ability to hear your natural surroundings clearly. Usually, it is described as sounding a bit like two pillows are held to either ear. This is because the passive sound dampening is blocking most of the high frequencies.</p>
<p>In order to get the sound clarity back, we need to use ambient microphones. The correct type of microphone can accept the loud sound sources without distortion. This type of microphone is said to have a high acoustic overload point, or AOP. We can send that clean audio signal from the microphones into the headphones at a safe listening level. In addition to a high AOP, the microphones also need to have a large signal to noise ratio (SNR), which helps avoid having too much "hiss" in the audio signal. Choosing the best microphone for the job turned out to involve a lot of testing. More on this later.</p>
<h3 id="the-modification">The Modification<a class="headerlink" href="#the-modification" title="Permanent link"></a></h3>
<p>In addition to sound dampening, the original electronics included the ability to listen to FM radio and plug in a 3.5mm TRS audio cable. In this tutorial, we will remove the stock electronics, and replace them with the SparkFun ESP32 Thing Plus and the WM8960 Audio Codec. The following two pictures show a comparison of the original electronics (blue) and our new version (green/red/black). We took pictures of the topside and backside of each for a more thorough comparison.</p>
<p>The new version actually includes three PCBs. The red microcontroller is the SparkFun Thing Plus ESP32. The black PCB is an early prototype of the SparkFun Audio Codec Breakout. The green PCB below is a custom "motherboard" that makes some connections between the two dev boards and provides the on/off/volume knob, 3.5mm TRS input, and mounting holes to mount this entire assembly into headphone can.</p>
<div align="center" class="grid cards">
<ul>
<li>
<p><a href="../assets/img/hp6_1000wide.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/hp6_315tall.jpg" />
    </figure>
    </a></p>
<hr />
<p><strong>Topside</strong></a></p>
</li>
<li>
<p><a href="../assets/img/hp7_1000wide.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/hp7_315tall.jpg" />
    </figure>
    </a></p>
<hr />
<p><strong>Backside</strong></a></p>
</li>
</ul>
</div>
<div style="text-align: center;"><i>Click images for a closer view.</i></div>

<p>Using the WM8960 Audio Codec Breakout, we can mix together sound sources. In this use case, we are mixing together three sound sources:</p>
<ol>
<li>
<p>) Wireless (aka "BT") audio from the ESP32 to the codec via I2S audio.</p>
</li>
<li>
<p>) Wired audio from a 3.5mm TRS audio jack (common headphone cable connector).</p>
</li>
<li>
<p>) Ambient microphones mounted to either sides of each ear-can, to provide a pair of stereo room mics to your listening experience. In a way, these microphones are "giving you your ears back". Most importantly, doing so at a safe volume, to prevent hearing loss.</p>
</li>
</ol>
<h3 id="required-materials">Required Materials<a class="headerlink" href="#required-materials" title="Permanent link"></a></h3>
<p>To follow along with this tutorial, you will need the following materials. You may not need everything though depending on what you have. Add it to your cart, read through the guide, and adjust the cart as necessary.</p>
<ul>
<li>1x <a href="https://www.sparkfun.com/products/20168">SparkFun Thing Plus - ESP32 WROOM (USB-C) [WRL-20168]</a></li>
<li>1x <a href="https://www.sparkfun.com/products/21250">SparkFun Audio Codec Breakout - WM8960 (Qwiic) [BOB-21250]</a></li>
<li>1x Set of "Mowing" Headphones aka "ear muffs"<ul>
<li><a href="https://www.amazon.com/Smoostart-Cancelling-Protection-Snowblowing-Construction/dp/B08M95FP4X">Smoostart Am/Fm Radio Hearing Protector, Noise Reduction Safety Ear Muffs, 30dB Noise Canceling Ear Protection</a></li>
<li><a href="https://www.amazon.com/dp/B09ZPBM9F2/">PROTEAR Digital AM FM Radio Headphones, 25dB NRR Ear Protection Safety Ear Muffs</a>   </li>
</ul>
</li>
<li>2x <a href="https://www.digikey.com/en/products/detail/pui-audio-inc/AOM-5035L-HD3-LW100-R/16585488">Ambient Microphones [PUI-AOM-5053L-HD3-LW100-R]</a></li>
<li>1x <a href="../assets/board_files/Super_Headphones_Eagle_Files_v20.zip">Custom "motherboard" PCB (open-source design on GitHub here, you'll just need to order from your favorite fab house!)</a></li>
<li>1x USB-C Cable<ul>
<li>Our <a href="https://www.sparkfun.com/products/15092">USB 2.0 A to C Cable [CAB-15092]</a> will do nicely</li>
<li>Our <a href="https://www.sparkfun.com/products/14743">USB 3.1 A to C Cable [CAB-14743]</a> is a good choice too</li>
</ul>
</li>
<li>1x <a href="https://www.amazon.com/Aibole-Black%EF%BC%86Blue-Automotive-Expandable-Sleeving/dp/B07FTPZ7T3/">PET Expandable Braided Sleeving</a></li>
<li>1x <a href="https://www.digikey.com/en/products/detail/cui-devices/SJ-3523-SMT-TR/281297">3.5mm Audio Jack (SMD) [SJ-3523-SMT-TR]</a></li>
<li>1x <a href="https://www.mouser.com/ProductDetail/Bourns/PTR902-2015F-A203?qs=7W50F6w4%252BW01n5myfufUyw%3D%3D">Potentiometer with Switch [652-PTR902-2015FA203]</a></li>
</ul>
<h3 id="tools">Tools<a class="headerlink" href="#tools" title="Permanent link"></a></h3>
<p>You will need to solder various connections using hook-up wire, microphone cable, PTH/SMD parts, and header pins. You may already have a few of these items but if not, the tools and hardware below will help. See suggested reading below for any help with learning or refreshing these assembly skills.</p>
<ul>
<li>1x <a href="https://www.sparkfun.com/products/11375">Hook-Up Wire - Assortment (Stranded, 22 AWG) [PRT-11375]</a></li>
<li>2x <a href="https://www.sparkfun.com/products/553">Break Away Male Headers - Right Angle [PRT-00553]</a></li>
<li><a href="https://www.sparkfun.com/products/22263">Wire Stripper - 20-30 AWG Solid (22-32 AWG Stranded) [TOL-22263]</a></li>
<li><a href="https://www.sparkfun.com/products/14456">Soldering Iron [TOL-14456]</a></li>
<li><a href="https://www.sparkfun.com/products/9163">Solder Lead Free - 15-gram Tube [TOL-9163]</a></li>
<li>Hot Glue Gun and Hot Glue</li>
<li>Dremel or similar tool for cutting out holes for ambient mics</li>
</ul>
<h3 id="suggested-reading">Suggested Reading<a class="headerlink" href="#suggested-reading" title="Permanent link"></a></h3>
<p>If you aren’t familiar with the following concepts, we also recommend checking out a few of these tutorials before continuing.</p>
<div class="grid cards col-4">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/i2c">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/8/2/I2C-Block-Diagram.jpg" style="width:264px; height:148px; object-fit:contain;" alt="I2C">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/i2c">
  <b>I2C</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/installing-an-arduino-library">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/b/e/4/b/2/50f04b99ce395fd95e000001.jpg" style="width:264px; height:148px; object-fit:contain;" alt="Installing an Arduino Library">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/installing-an-arduino-library">
  <b>Installing an Arduino Library</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering/all">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/5/Soldering_Action-01.jpg"style="width:264px; height:148px; object-fit:contain;" alt="How to Solder: Through Hole Soldering">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering/all">
  <b>How to Solder: Through Hole Soldering</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/esp32-thing-plus-usb-c-hookup-guide">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/2/3/5/3/assembly_batt.jpg"style="width:264px; height:148px; object-fit:contain;" alt="ESP32 Thing Plus (USB-C) Hookup Guide">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/esp32-thing-plus-usb-c-hookup-guide">
  <b>ESP32 Thing Plus (USB-C) Hookup Guide</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/audio-codec-breakout---wm8960-hookup-guide">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/2/7/6/1/21250-_BOB_SparkFun_Audio_Codec_Breakout-_01.jpg"style="width:264px; height:148px; object-fit:contain;" alt="Audio Codec Breakout - WM8960 Hookup Guide">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/audio-codec-breakout---wm8960-hookup-guide">
  <b>Audio Codec Breakout - WM8960 Hookup Guide</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/analog-mems-microphone-vm2020-hookup-guide">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/2/9/1/3/21537-Analog_MEMS_Microphone_Breakout-VM2020_01.jpg"style="width:264px; height:148px; object-fit:contain;" alt="Analog MEMS Microphone (VM2020) Hookup Guide">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/analog-mems-microphone-vm2020-hookup-guide">
  <b>Analog MEMS Microphone (VM2020) Hookup Guide</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
</div>
<h1 id="hardware-overview">Hardware Overview<a class="headerlink" href="#hardware-overview" title="Permanent link"></a></h1>
<!-- This section goes into detail about the various components on the product, solder jumpers as well as the board dimensions with a dimensional drawing exported from Eagle. -->

<h2 id="block-diagram">Block Diagram<a class="headerlink" href="#block-diagram" title="Permanent link"></a></h2>
<p>Here is a high-level block diagram of the sound system inside the headphones. The Audio Codec is central to this design. It handles all of the sound inputs and outputs. The ESP32 Thing Plus is still the "brain", and it is necessary  to setup and control the codec with I<sup>2</sup>C. The ESP32 also receives the wireless audio (BT), and then sends that to the codec, digitally, with I2S audio data lines.</p>
<figure>
<p><a href="../assets/img/Super_Headphones_Block_Diagram_v01.jpg" title="Click to enlarge"><img alt="Headphones" src="../assets/img/Super_Headphones_Block_Diagram_v01_600wide.jpg" width="600" /></a></p>
<figcaption>
<p>High level block diagram of the headphone system.</p>
</figcaption>
</figure>
<h2 id="exploded-view">Exploded View<a class="headerlink" href="#exploded-view" title="Permanent link"></a></h2>
<p>Here is an exploded view of the headphones. It took a little experimenting and tinkering to eventually disassemble all of the parts. In this section, we will share a few techniques we learned along the way during this hack.</p>
<figure>
<p><a href="../assets/img/superheadphones_exploded.jpg" title="Click to enlarge"><img alt="Headphones" src="../assets/img/superheadphones_exploded_600wide.jpg" width="600" /></a></p>
<figcaption>
<p>Exploded view of the headphone system.</p>
</figcaption>
</figure>
<h2 id="foam-removal">Foam Removal<a class="headerlink" href="#foam-removal" title="Permanent link"></a></h2>
<p>Removing the foam was pretty straight forward. You can use a flat head screwdriver or pliers, but be careful. As you can see, I accidentally ripped the foam apart when I pulled a bit too hard.  </p>
<figure>
<p><a href="../assets/img/foam_ripped.jpg" title="Click to enlarge"><img alt="Headphones" src="../assets/img/foam_ripped_600wide.jpg" width="600" /></a></p>
<figcaption>
<p>Oops! I accidentally ripped the foam.</p>
</figcaption>
</figure>
<p>It's really best to take it slowly and pull it gently, little-by-little. I really got the hang of this by the end of this project. I must have taken mine apart nearly 50 times as I fine tuned the wiring and swapped out microphones during testing. Hopefully, by reading this tutorial, you can keep this dis-assembly and reassembly cycle to a minimum. :)</p>
<h2 id="screws">Screws<a class="headerlink" href="#screws" title="Permanent link"></a></h2>
<p>After you remove the foam, this will expose the screws that hold the outer and inner parts of each can together.</p>
<figure>
<p><a href="../assets/img/hp_screws.jpg" title="Click to enlarge"><img alt="Headphones" src="../assets/img/hp_screws_600wide.jpg" width="600" /></a></p>
<figcaption>
<p>Two small screws hold the cans together.</p>
</figcaption>
</figure>
<p>The screws are located back behind the black plastic. Because of the angle, they can be a little difficult to access, but with a small Phillips head screwdriver and the right amount of pressure, it can be done.</p>
<h2 id="knob-and-pcb-removal">Knob and PCB removal<a class="headerlink" href="#knob-and-pcb-removal" title="Permanent link"></a></h2>
<p>When the inner screws are removed, the cans come apart, and then you will see the original electronics (blue). The volume knob is simply pressure fitted onto the potentiometer shaft, so you can pull that directly off. Unscrew the potentiometer mounting nut and the four mounting screws, and you will then be able to remove the original electronics.</p>
<figure>
<p><a href="../assets/img/knob_removal.jpg" title="Click to enlarge"><img alt="Headphones" src="../assets/img/knob_removal_600wide.jpg" width="600" /></a></p>
<figcaption>
<p>Knob, nut, and 4 mounting screws removed.</p>
</figcaption>
</figure>
<h2 id="custom-pcb-assembly">Custom PCB Assembly<a class="headerlink" href="#custom-pcb-assembly" title="Permanent link"></a></h2>
<p>Note, the custom PCB is not 100% necessary to complete this project. My early prototype "V2" was a hand-wired version. If you decide to go that route, then referencing the <a href="../assets/board_files/Super_Headphones_Schematic_v20.pdf">custom PCB Schematic PDF</a> would be a good guide.</p>
<p>If you do decided to order the custom PCB (or a version of your own), the "mother board" PCB will need some assembly too:</p>
<ul>
<li>
<p>Use headers to solder in the Audio Codec and ESP32 Thing Plus.</p>
</li>
<li>
<p>Solder into place the PTH right-angled potentiometer/switch.</p>
</li>
<li>
<p>Solder into place the SMD 3.5mm TRS audio input connector.</p>
</li>
</ul>
<div align="center" class="grid cards">
<ul>
<li>
<p><a href="../assets/img/v2_hand_wired.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/v2_hand_wired_315wide.jpg" />
    </figure></p>
<hr />
<p><strong>Early Prototype V2</strong></a></p>
</li>
<li>
<p><a href="../assets/img/custom_pcb.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/custom_pcb_315wide.jpg" />
    </figure></p>
<hr />
<p><strong>Bare Custom PCB</strong></a></p>
</li>
<li>
<p><a href="../assets/img/custom_pcb_assembled.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/custom_pcb_assembled_315wide.jpg" />
    </figure></p>
<hr />
<p><strong>Assembled Custom PCB</strong></a></p>
</li>
</ul>
</div>
<div style="text-align: center;"><i>Click images for a closer view.</i></div>

<h2 id="wiring-diagram">Wiring Diagram<a class="headerlink" href="#wiring-diagram" title="Permanent link"></a></h2>
<p>Once everything is opened up, and you have your custom PCB assembled, you can begin wiring up the remaining necessary connections: microphones, speakers, and battery.</p>
<p>Before you dive into soldering things up, here are three important things to remember:</p>
<ul>
<li>
<p>Use 26 gauge wire for most of the connections, as it can get fairly tight in there. I used an old Ethernet cable which had 8 conductors. If you open those up, the resulting hookup wire is quite nice to work with, and has great coloring to keep things straight.</p>
</li>
<li>
<p>The left microphone signal and its ground connection must use a shielded cable. If you wire it up with bare hook-up wire, then you will be prone to picking up strange sounds like distant radio stations and creeping whining noises with varying frequencies. Kind of fun, but not ideal for every listening experience.</p>
</li>
<li>
<p>The microphones we ultimately chose require a specific power and signal circuit (see below).</p>
</li>
</ul>
<p>Here is a wiring diagram to show all the connections in one place:</p>
<figure>
<p><a href="../assets/img/SuperHeadphones_Wiring_Diagram.jpg" title="Click to enlarge"><img alt="Headphones" src="../assets/img/SuperHeadphones_Wiring_Diagram_600wide.jpg" width="600" /></a></p>
<figcaption>
<p>Wiring Diagram. Lots to hook up!</p>
</figcaption>
</figure>
<h2 id="microphone-circuit">Microphone Circuit<a class="headerlink" href="#microphone-circuit" title="Permanent link"></a></h2>
<p>Here is the required circuit from the datasheet of the PUI Audio AOM-5035L.</p>
<figure>
<p><a href="../assets/img/mic_circuit.png" title="Click to enlarge"><img alt="Headphones" src="../assets/img/mic_circuit_600wide.png" width="600" /></a></p>
<figcaption>
<p>AOM-5035L Microphone Signal &amp; Power Circuit</p>
</figcaption>
</figure>
<p>Note, the capacitor is already included on the WM8960 input, and so we only need to wire up the <a href="https://learn.sparkfun.com/tutorials/pull-up-resistors/all#what-is-a-pull-up-resistor">pull-down resistor</a> of 5.6K on the signal. Put this pull-down resistor as close to the microphone as possible. The left microphone is the only one that is more susceptible to picking up noise, and so we found that having the pull-down in that ear-can (and using a shielded mic cable) eliminated any unwanted noise.</p>
<p>As a side note, the proximity of the pull-down resistor to the microphone also had an effect on the acoustic overload point (AOP). Strangely, if the resistor was placed too far away, then the mics begin clipping at lower sound source volumes. During my early testing, I would hear clipping in my left ear when I really played hard on the hi-hats (which are probably the loudest and closest drum instrument to that microphone). But as soon as I moved the pull-down closer to the mic, the clipping
went away!</p>
<p>Here is some close up shots of where I ended up hacking in the final position of each pull-down resistor. Note, I didn't have the exact 5.6K&ohm; resistors required, so for the left ear, I used two 2.2K&ohm;s in series. And for the right, I used a 4.7K&ohm;.</p>
<div align="center" class="grid cards">
<ul>
<li>
<p><a href="../assets/img/left_pull_down.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/left_pull_down_600wide.jpg" />
    </figure>
    </a></p>
<hr />
<p><strong>Left mic pull-down resistor</strong></a></p>
</li>
<li>
<p><a href="../assets/img/right_pull_down.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/right_pull_down_600wide.jpg" />
    </figure>
    </a></p>
<hr />
<p><strong>Right mic pull-down resistor</strong></a></p>
</li>
</ul>
</div>
<h1 id="installing-arduino-libraries">Installing Arduino Libraries<a class="headerlink" href="#installing-arduino-libraries" title="Permanent link"></a></h1>
<div class="admonition arduino">
<p class="admonition-title">Arduino</p>
<h3 id="arduino-ide">Arduino IDE<a class="headerlink" href="#arduino-ide" title="Permanent link"></a></h3>
<p>This example assumes you are using the latest version of the Arduino IDE on your desktop. If this is your first time using Arduino IDE and a library, please review the following tutorials.</p>
<ul>
<li><a href="https://learn.sparkfun.com/tutorials/installing-arduino-ide">Installing the Arduino IDE</a></li>
<li><a href="https://learn.sparkfun.com/tutorials/installing-an-arduino-library">Installing an Arduino Library</a></li>
</ul>
<h3 id="usb-to-serial-drivers">USB-to-Serial Drivers<a class="headerlink" href="#usb-to-serial-drivers" title="Permanent link"></a></h3>
<p>If you've never connected a CH340 device to your computer before, you may need to install drivers for the USB-to-serial converter. Check out our section on "<a href="https://learn.sparkfun.com/tutorials/sparkfun-serial-basic-ch340c-hookup-guide#drivers-if-you-need-them">How to Install CH340 Drivers</a>" for help with the installation.</p>
</div>
<h3 id="wm8960-audio-codec">WM8960 Audio Codec<a class="headerlink" href="#wm8960-audio-codec" title="Permanent link"></a></h3>
<p>SparkFun has written a library to work with the SparkFun Audio Codec Breakout - WM8960 (Qwiic). You can obtain this library through the Arduino Library Manager by searching for "<strong>SparkFun Audio Codec Breakout WM8960</strong>". Find the one written by SparkFun Electronics and install the latest version. Users who prefer to manually install the library can get it from the  <a href="https://github.com/sparkfun/SparkFun_WM8960_Arduino_Library">GitHub Repository</a> or download the .ZIP by clicking the button below:</p>
<div style="text-align: center"><a href="https://github.com/sparkfun/SparkFun_WM8960_Arduino_Library/archive/refs/heads/main.zip" class="md-button">SparkFun WM8960 Arduino Library (ZIP)</a></div>

<h3 id="esp32-a2dp">ESP32-A2DP<a class="headerlink" href="#esp32-a2dp" title="Permanent link"></a></h3>
<p>Paul Schatzmann has written a library to work with I2S audio and wireless audio (BT) using the ESP32 microcontrollers. To manually install the library, get it from the  <a href="https://github.com/pschatzmann/ESP32-A2DP">GitHub Repository</a> or download the .ZIP by clicking the button below:</p>
<div style="text-align: center"><a href="https://github.com/pschatzmann/ESP32-A2DP/archive/refs/heads/master.zip" class="md-button">Paul Schatzmann's ESP32-A2DP Arduino Library (ZIP)</a></div>

<h2 id="arduino-code">Arduino Code<a class="headerlink" href="#arduino-code" title="Permanent link"></a></h2>
<p>Now that we have our libraries installed, we can compile and upload the Arduino code to the ESP32 Thing Plus.</p>
<h2 id="serial-upload">Serial Upload<a class="headerlink" href="#serial-upload" title="Permanent link"></a></h2>
<p>Below is the Arduino sketch INO for this project. Copy and paste the code below in your Arduino IDE.</p>
<details class="code">
<summary>SuperHeadphones Arduino Sketch</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Super_Headphones_BT_and_MIC_V2.0.ino</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">  1</a></span>
<span class="normal"><a href="#__codelineno-0-2">  2</a></span>
<span class="normal"><a href="#__codelineno-0-3">  3</a></span>
<span class="normal"><a href="#__codelineno-0-4">  4</a></span>
<span class="normal"><a href="#__codelineno-0-5">  5</a></span>
<span class="normal"><a href="#__codelineno-0-6">  6</a></span>
<span class="normal"><a href="#__codelineno-0-7">  7</a></span>
<span class="normal"><a href="#__codelineno-0-8">  8</a></span>
<span class="normal"><a href="#__codelineno-0-9">  9</a></span>
<span class="normal"><a href="#__codelineno-0-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-0-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-0-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-0-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-0-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-0-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-0-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-0-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-0-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-0-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-0-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-0-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-0-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-0-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-0-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-0-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-0-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-0-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-0-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-0-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">/*</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="cm">Super Headphones</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="cm">SparkFun Electronics</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="cm">Pete Lewis</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="cm">September 2023</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="cm">Using an ESP32 Thing Plus and a WM8960 Audio Codec,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="cm">This project enables you to create your own wireless headphones (aka BT).</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="cm">It also alows you to mix in a pair of ambient microphones!</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="cm">Read the tutorial here:</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="cm">https://docs.sparkfun.com/SuperHeadphones/</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="cm">This code utilized Paul Schatzmann&#39;s ESP32-A2DP library to make all the wireless </span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="cm">audio (BT) functionality happen. Big thank you to Paul Schatzmann and the many others </span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="cm">who have contributed to that library!</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="cm">Download here: https://github.com/pschatzmann/ESP32-A2DP</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="cm">  Do you like this open source code? Help support SparkFun. Buy a board!</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="cm">    SparkFun Audio Codec Breakout - WM8960 (Qwiic)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="cm">    https://www.sparkfun.com/products/21250</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="cm">    SparkFun Thing Plus - ESP32 WROOM (USB-C)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="cm">    https://www.sparkfun.com/products/20168</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="cm">This program is distributed in the hope that it will be useful,</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="cm">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="cm">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="cm">GNU General Public License for more details.</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="cm">You should have received a copy of the GNU General Public License</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="cm">along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="cm">*/</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SparkFun_WM8960_Arduino_Library.h&gt;</span><span class="c1">  // CTRL+Click here to get the library: http://librarymanager/All#SparkFun_WM8960</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="n">WM8960</span><span class="w"> </span><span class="n">codec1</span><span class="p">;</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;BluetoothA2DPSink.h&quot;</span><span class="c1"> // To manually install, download here: https://github.com/pschatzmann/ESP32-A2DP</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="n">BluetoothA2DPSink</span><span class="w"> </span><span class="n">a2dp_sink</span><span class="p">;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="c1">//// Iot Redboard</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="c1">//#define I2S_WS 16</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="c1">//#define I2S_SD 25</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="c1">//#define I2S_SDO 17</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="c1">//#define I2S_SCK 14</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="c1">// ESP32 Thing Plus C</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="cp">#define I2S_WS 13</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="cp">#define I2S_SD 27</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="cp">#define I2S_SDO 14</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="cp">#define I2S_SCK 32</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="c1">// Use I2S Processor 0</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="cp">#define I2S_PORT I2S_NUM_0</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="c1">// Define input buffer length</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="cp">#define bufferLen 64</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="kt">int16_t</span><span class="w"> </span><span class="n">sBuffer</span><span class="p">[</span><span class="n">bufferLen</span><span class="p">];</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="kt">int</span><span class="w"> </span><span class="n">pgaGain1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="p">;</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="kt">int</span><span class="w"> </span><span class="n">pgaGain1_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="cp">#define NUM_OF_READINGS 20</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="kt">long</span><span class="w"> </span><span class="n">userInputA0</span><span class="p">;</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="kt">int</span><span class="w"> </span><span class="n">userInputArray</span><span class="p">[</span><span class="n">NUM_OF_READINGS</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w">  </span><span class="c1">// used to make a rolling average of readings on ADC input</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="kt">int</span><span class="w"> </span><span class="n">arrayPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="cp">#define PGA_GAIN_SETTING_MAX 32 </span><span class="c1">// don&#39;t really need more than this on the PGA, so let&#39;s put a max on it so no one gets too crazy.</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">);</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="w">  </span><span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="w">  </span><span class="n">Wire</span><span class="p">.</span><span class="n">setClock</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">codec1</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w">  </span><span class="c1">//Begin communication over I2C</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;The codec 1 did not respond. Please check wiring.&quot;</span><span class="p">);</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="w">      </span><span class="p">;</span><span class="w">  </span><span class="c1">//Freeze</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Codec1 is connected properly.&quot;</span><span class="p">);</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">  </span><span class="n">codec1_setup</span><span class="p">();</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="w">  </span><span class="c1">// Set up I2S</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">  </span><span class="n">i2s_install</span><span class="p">();</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">  </span><span class="n">i2s_setpin</span><span class="p">();</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="w">  </span><span class="n">a2dp_sink</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="s">&quot;SuperHeadphones&quot;</span><span class="p">);</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="p">}</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="w">  </span><span class="c1">// Read the volumet potentiometer to set the volume of the ambient mics.</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">  </span><span class="c1">// Every loop:</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="w">  </span><span class="c1">// - take a reading and put it into the array</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="w">  </span><span class="c1">// - increment position</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="w">  </span><span class="c1">// - loop back position to start of array </span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="w">  </span><span class="c1">// - when we reach the end take all readings in array, and create a rolling average.</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="w">  </span><span class="n">userInputArray</span><span class="p">[</span><span class="n">arrayPos</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analogRead</span><span class="p">(</span><span class="n">A0</span><span class="p">);</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="w">  </span><span class="n">arrayPos</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">arrayPos</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">NUM_OF_READINGS</span><span class="p">)</span><span class="w"> </span><span class="n">arrayPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">NUM_OF_READINGS</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">userInputArray</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">  </span><span class="n">userInputA0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">NUM_OF_READINGS</span><span class="p">;</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="w">  </span><span class="c1">// map it from 0-4096, to a value that is acceptable in the pga gain (0-63)</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">  </span><span class="c1">// 0-63, (0 = -17.25dB) &lt;&lt;-- 0.75dB steps --&gt;&gt; (23 = +0dB)...(63 = +30dB)</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="w">  </span><span class="n">pgaGain1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">userInputA0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">4096</span><span class="p">,</span><span class="w"> </span><span class="n">PGA_GAIN_SETTING_MAX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pgaGain1</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">pgaGain1_prev</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="w">    </span><span class="n">codec1</span><span class="p">.</span><span class="n">setLINVOL</span><span class="p">(</span><span class="n">pgaGain1</span><span class="p">);</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="w">    </span><span class="n">codec1</span><span class="p">.</span><span class="n">setRINVOL</span><span class="p">(</span><span class="n">pgaGain1</span><span class="p">);</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;pgaGain1: &quot;</span><span class="p">);</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">pgaGain1</span><span class="p">);</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="w">  </span><span class="n">pgaGain1_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pgaGain1</span><span class="p">;</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="p">}</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="kt">void</span><span class="w"> </span><span class="nf">codec1_setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="w">  </span><span class="c1">// General setup needed</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableVREF</span><span class="p">();</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableVMID</span><span class="p">();</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="w">  </span><span class="c1">//codec1.enableMicBias();</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="w">  </span><span class="c1">// WM8960_MIC_BIAS_VOLTAGE_0_9_AVDD (0.9*AVDD) or</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="w">  </span><span class="c1">// WM8960_MIC_BIAS_VOLTAGE_0_65_AVDD (0.65*AVDD)</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="w">  </span><span class="c1">//codec1.setMicBiasVoltage(WM8960_MIC_BIAS_VOLTAGE_0_9_AVDD);</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="w">  </span><span class="c1">// setup signal flow to the ADC</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableLMIC</span><span class="p">();</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableRMIC</span><span class="p">();</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="w">  </span><span class="c1">// connect from INPUT1 to &quot;n&quot; (aka inverting) inputs of PGAs.</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">connectLMN1</span><span class="p">();</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">connectRMN1</span><span class="p">();</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="w">  </span><span class="c1">// disable mutes on PGA inputs (aka INTPUT1)</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">disableLINMUTE</span><span class="p">();</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">disableRINMUTE</span><span class="p">();</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="w">  </span><span class="c1">// set input boosts to get inputs 1 to the boost mixers</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setLMICBOOST</span><span class="p">(</span><span class="n">WM8960_MIC_BOOST_GAIN_0DB</span><span class="p">);</span><span class="w">  </span><span class="c1">// 0 = 0dB</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setRMICBOOST</span><span class="p">(</span><span class="n">WM8960_MIC_BOOST_GAIN_0DB</span><span class="p">);</span><span class="w">  </span><span class="c1">// 0 = 0dB</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">pgaLeftNonInvSignalSelect</span><span class="p">(</span><span class="n">WM8960_PGAL_VMID</span><span class="p">);</span><span class="w">   </span><span class="c1">// for single ended input on LIN1</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">pgaRightNonInvSignalSelect</span><span class="p">(</span><span class="n">WM8960_PGAL_VMID</span><span class="p">);</span><span class="w">  </span><span class="c1">// for single ended input on RIN1</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="w">  </span><span class="c1">//codec1.enablePgaZeroCross();</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">connectLMIC2B</span><span class="p">();</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">connectRMIC2B</span><span class="p">();</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="w">  </span><span class="c1">// enable boost mixers</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableAINL</span><span class="p">();</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableAINR</span><span class="p">();</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="w">  </span><span class="c1">// enable output mixers</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableLOMIX</span><span class="p">();</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableROMIX</span><span class="p">();</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="w">  </span><span class="c1">// Enable bypass connection from Left INPUT3 to Left output mixer, note, the</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="w">  </span><span class="c1">// default gain on this input (LI2LOVOL) is -15dB</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableLI2LO</span><span class="p">();</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableRI2RO</span><span class="p">();</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="w">  </span><span class="c1">// Sets volume control between &quot;left input&quot; to &quot;left output mixer&quot;</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setLI2LOVOL</span><span class="p">(</span><span class="n">WM8960_OUTPUT_MIXER_GAIN_0DB</span><span class="p">);</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setRI2ROVOL</span><span class="p">(</span><span class="n">WM8960_OUTPUT_MIXER_GAIN_0DB</span><span class="p">);</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="w">  </span><span class="c1">//  LB2LO (booster to output mixer (analog bypass)</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableLB2LO</span><span class="p">();</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableRB2RO</span><span class="p">();</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="w">  </span><span class="c1">// connect from DAC outputs to output mixer</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableLD2LO</span><span class="p">();</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableRD2RO</span><span class="p">();</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="w">  </span><span class="c1">// set gainstage between booster mixer and output mixer</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="w">  </span><span class="c1">// for this loopback example, we are going to keep these as low as they go</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setLB2LOVOL</span><span class="p">(</span><span class="n">WM8960_OUTPUT_MIXER_GAIN_0DB</span><span class="p">);</span><span class="w">  </span><span class="c1">// 0 = -21dB</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setRB2ROVOL</span><span class="p">(</span><span class="n">WM8960_OUTPUT_MIXER_GAIN_0DB</span><span class="p">);</span><span class="w">  </span><span class="c1">// 0 = -21dB</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="w">  </span><span class="c1">// CLOCK STUFF, These settings will get you 44.1KHz sample rate, and class-d freq at 705.6kHz</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enablePLL</span><span class="p">();</span><span class="w">  </span><span class="c1">// needed for class-d amp clock</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setPLLPRESCALE</span><span class="p">(</span><span class="n">WM8960_PLLPRESCALE_DIV_2</span><span class="p">);</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setSMD</span><span class="p">(</span><span class="n">WM8960_PLL_MODE_FRACTIONAL</span><span class="p">);</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setCLKSEL</span><span class="p">(</span><span class="n">WM8960_CLKSEL_PLL</span><span class="p">);</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setSYSCLKDIV</span><span class="p">(</span><span class="n">WM8960_SYSCLK_DIV_BY_2</span><span class="p">);</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setBCLKDIV</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setDCLKDIV</span><span class="p">(</span><span class="n">WM8960_DCLKDIV_16</span><span class="p">);</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setPLLN</span><span class="p">(</span><span class="n">WM8960_DCLKDIV_16</span><span class="p">);</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setPLLK</span><span class="p">(</span><span class="mh">0x86</span><span class="p">,</span><span class="w"> </span><span class="mh">0xC2</span><span class="p">,</span><span class="w"> </span><span class="mh">0x26</span><span class="p">);</span><span class="w">  </span><span class="c1">// PLLK=86C226h</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="w">  </span><span class="c1">//codec1.set_ADCDIV(0); // default is 000 (what we need for 44.1KHz), so no need to write this.</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="w">  </span><span class="c1">//codec1.set_DACDIV(0); // default is 000 (what we need for 44.1KHz), so no need to write this.</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setWL</span><span class="p">(</span><span class="n">WM8960_WL_16BIT</span><span class="p">);</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enablePeripheralMode</span><span class="p">();</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="w">  </span><span class="c1">//codec1.enableMasterMode();</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="w">  </span><span class="c1">//codec1.set_ALRCGPIO(); // note, should not be changed while ADC is enabled.</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="w">  </span><span class="c1">// enable ADCs and DACs</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableAdcLeft</span><span class="p">();</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableAdcRight</span><span class="p">();</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableDacLeft</span><span class="p">();</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableDacRight</span><span class="p">();</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">disableDacMute</span><span class="p">();</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="w">  </span><span class="c1">//codec1.enableLoopBack(); // Loopback sends ADC data directly into DAC</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">disableLoopBack</span><span class="p">();</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">disableDacMute</span><span class="p">();</span><span class="w">  </span><span class="c1">// default is &quot;soft mute&quot; on, so we must disable mute to make channels active</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableHeadphones</span><span class="p">();</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="w">  </span><span class="c1">//codec1.enableSpeakers();</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">enableOUT3MIX</span><span class="p">();</span><span class="w">  </span><span class="c1">// provides VMID as buffer for headphone ground</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="w">  </span><span class="c1">//codec1.enableSpeakerZeroCross();</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Volume set to +0dB&quot;</span><span class="p">);</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="w">  </span><span class="c1">//codec1.setSpeakerVolume(120);</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setHeadphoneVolumeDB</span><span class="p">(</span><span class="mf">0.00</span><span class="p">);</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="w">  </span><span class="c1">//codec1.enable3d();</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Codec 1 Setup complete. Listen to left/right INPUT1 on Speaker outputs.&quot;</span><span class="p">);</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setLINVOL</span><span class="p">(</span><span class="mi">23</span><span class="p">);</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="w">  </span><span class="n">codec1</span><span class="p">.</span><span class="n">setRINVOL</span><span class="p">(</span><span class="mi">23</span><span class="p">);</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="p">}</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="kt">void</span><span class="w"> </span><span class="nf">i2s_install</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="w">  </span><span class="c1">// Set up I2S Processor configuration</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="n">i2s_config_t</span><span class="w"> </span><span class="n">i2s_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="w">    </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i2s_mode_t</span><span class="p">)(</span><span class="n">I2S_MODE_MASTER</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">I2S_MODE_TX</span><span class="p">),</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="w">    </span><span class="p">.</span><span class="n">sample_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">44100</span><span class="p">,</span><span class="w">  </span><span class="c1">// Updated automatically by A2DP</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">    </span><span class="p">.</span><span class="n">bits_per_sample</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i2s_bits_per_sample_t</span><span class="p">)</span><span class="mi">16</span><span class="p">,</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="w">    </span><span class="p">.</span><span class="n">channel_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I2S_CHANNEL_FMT_RIGHT_LEFT</span><span class="p">,</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="w">    </span><span class="p">.</span><span class="n">communication_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i2s_comm_format_t</span><span class="p">)(</span><span class="n">I2S_COMM_FORMAT_STAND_I2S</span><span class="p">),</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="w">    </span><span class="p">.</span><span class="n">intr_alloc_flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">  </span><span class="c1">// Default interrupt priority</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="w">    </span><span class="p">.</span><span class="n">dma_buf_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="w">    </span><span class="p">.</span><span class="n">dma_buf_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="w">    </span><span class="p">.</span><span class="n">use_apll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="w">    </span><span class="p">.</span><span class="n">tx_desc_auto_clear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="w">  </span><span class="c1">// Avoiding noise in case of data unavailability</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="w">  </span><span class="n">a2dp_sink</span><span class="p">.</span><span class="n">set_i2s_config</span><span class="p">(</span><span class="n">i2s_config</span><span class="p">);</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="p">}</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="kt">void</span><span class="w"> </span><span class="nf">i2s_setpin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="w">  </span><span class="c1">// Set I2S pin configuration</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="w">  </span><span class="n">i2s_pin_config_t</span><span class="w"> </span><span class="n">my_pin_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="w">    </span><span class="p">.</span><span class="n">bck_io_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I2S_SCK</span><span class="p">,</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="w">    </span><span class="p">.</span><span class="n">ws_io_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I2S_WS</span><span class="p">,</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="w">    </span><span class="p">.</span><span class="n">data_out_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I2S_SDO</span><span class="p">,</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="w">    </span><span class="p">.</span><span class="n">data_in_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I2S_PIN_NO_CHANGE</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="w">  </span><span class="n">a2dp_sink</span><span class="p">.</span><span class="n">set_pin_config</span><span class="p">(</span><span class="n">my_pin_config</span><span class="p">);</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</details>
<p>Select your board in the Tools menu (in our case <strong>ESP32 Thing Plus</strong>) and the correct Port it enumerated on and click "Upload". After uploading the code, open the <a href="https://learn.sparkfun.com/tutorials/terminal-basics">Serial Monitor</a> or terminal emulator of your choice with the baud rate set to <strong>115200</strong>. You should see the following message pop up. And then as you turn the volume potentiometer, the setting value will be printed to the terminal.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle;"><a href="../assets/img/Arduino_Terminal_Print_Out.png"><img src="../assets/img/Arduino_Terminal_Print_Out_600wide.png" height="600px" width="600px" alt="Output to the terminal"></a></td>
    </tr>
  </table>
</div>

<p>If you see the above messages in your terminal, then you should be ready to try out some listening. Put your headphones on and try adjusting the potentiometer. As you turn the knob (clockwise), this will increase the volume level of the microphones.</p>
<p>One way to verify the system is to turn the volume all the way up and gently rub each microphone with your fingertip. You should hear a quiet scratching sound in the corresponding headphone ear speaker.</p>
<p>Note, if you hear a lot of buzzing, it is most likely the USB cable. Try unplugging the USB cable, and powering only from the battery. The battery will be a much quieter power source, and so should not add any noise into the audio signal.</p>
<h2 id="wireless-connection">Wireless connection<a class="headerlink" href="#wireless-connection" title="Permanent link"></a></h2>
<p>In addition to the messages sent to the serial terminal, the provided code sets up the ESP32 Thing Plus to be an audio receiver as a bluetooth A2DP Sink.</p>
<p>After powering up your headphones, use your PC or cell phone to find a Bluetooth device named "SuperHeadphones".</p>
<div align="center" class="grid cards">
<ul>
<li>
<p><a href="../assets/img/pc_bt_connect.png">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/pc_bt_connect_315tall.png" />
    </figure>
    </a></p>
<hr />
<p><strong>Connect BT with your PC</strong></a></p>
</li>
<li>
<p><a href="../assets/img/cell_bt_connect.jpg">
    <figure markdown>
    <img alt="Headphones" src="../assets/img/cell_bt_connect_315tall.jpg" />
    </figure>
    </a></p>
<hr />
<p><strong>Connect to BT with your cell phone</strong></a></p>
</li>
</ul>
</div>
<p>Click Connect. Now you can play audio from your PC program or phone app and listen on your superheadphones!</p>
<p>Note, the volume control for this sound source is controlled by adjusting the setting on your computer or cell phone. The knob on the headphones is only used to adjust the volume of the ambient microphones.</p>
<h2 id="diving-deeper">Diving deeper<a class="headerlink" href="#diving-deeper" title="Permanent link"></a></h2>
<p>The provided code for this project is a combination of other Arduino example
sketches. Review these for further information on how each section of the code works.</p>
<ul>
<li>
<p>WM8960 Arduino Library Examples:</p>
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/audio-codec-breakout---wm8960-hookup-guide/all#example-2-line-input-2">Example 3: Line Input 1</a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/audio-codec-breakout---wm8960-hookup-guide/all#example-9-i2s-bluetooth">Example 9: I2S Bluetooth</a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/audio-codec-breakout---wm8960-hookup-guide/all#example-10-adc-gain">Example 10: ADC Gain</a></p>
</li>
</ul>
</li>
<li>
<p>ESP32-A2DP Arduino Library Examples:</p>
<ul>
<li>
<p><a href="https://github.com/pschatzmann/ESP32-A2DP/blob/main/examples/bt_music_receiver_simple/bt_music_receiver_simple.ino">bt_music_receiver_simple</a></p>
</li>
<li>
<p><a href="https://github.com/pschatzmann/ESP32-A2DP/tree/main#defining-pins">I2S pin definition</a></p>
</li>
<li>
<p><a href="https://github.com/pschatzmann/ESP32-A2DP/tree/main#using-your-specific-i2s_config">I2S configuration</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="microphone-selection">Microphone Selection<a class="headerlink" href="#microphone-selection" title="Permanent link"></a></h2>
<h3 id="specifications">Specifications<a class="headerlink" href="#specifications" title="Permanent link"></a></h3>
<p>For this particular project, we needed a microphone with three specific characteristics:</p>
<ol>
<li>
<p>) It needed to have a high acoustic overload point (AOP). This would allow the microphones to be located on the outside of the ear-cans, very close to a full-volume acoustic drum set, and still not distort. Our final mic choice has an AOP of 135dB.</p>
</li>
<li>
<p>) It needed to have a large signal to noise ratio (SNR). This means that the  microphone will output a cleaner signal with less "hiss" sound during quiet times.  Something with at least 60dB or great would work. Our ultimate choice was for a microphone that had 75dB SNR.</p>
</li>
<li>
<p>) It needed decent sensitivity. Something near the range of -35dB would do. Note,  when this number gets higher, that means it's more sensitive. Because sensitivity is almost always expressed as a negative number, that means a "smaller" negative number is more sensitive.</p>
</li>
</ol>
<p>To learn more about microphone specifications such as AOP, SNR, sensitivity, please check out this very informative document from InvenSense here:</p>
<div style="text-align: center"><a href="https://invensense.tdk.com/wp-content/uploads/2015/02/AN-1112-v1.1.pdf" target="mic_app_note" class="md-button">InvenSense Application Note AN‐1112, MICROPHONE SPECIFICATIONS EXPLAINED</a></div>

<p>I tried three other microphones before I found my favorite. Here is a table to show
the others options, and how they compare in terms of mic specs.</p>
<div style="text-align: center;">
    <table>
        <tr>
            <th style="text-align: center; border: solid 1px #cccccc;">Mic
            </th>
            <th style="text-align: center; border: solid 1px #cccccc;">AOP
            </th>
            <th style="text-align: center; border: solid 1px #cccccc;">SNR
            </th>
            <th style="text-align: center; border: solid 1px #cccccc;">Sensitivity
            </th>
            <th style="text-align: center; border: solid 1px #cccccc;">Notes
            </th>                        
        </tr>
        <tr>
             <td style="text-align: center; border: solid 1px #cccccc;">ICS-40180
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">124dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">65dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">−38dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">With the onboard op amp gain, this ultimately had too low of an resulting AOP for drums. It clipped a lot when I played loudly.                    

            </td>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;">SPH8878LR5H-1
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">134dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">66dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">-44dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">Again, with the onboard op amp gain, this ultimately had too low of an AOP for drums. It clipped a lot when I played loudly.                             

            </td>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;">VM2020
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">149dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">50dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">-63dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">With such a high AOP, this mic could definitely handle the loud drums without clipping. This was a huge win, and actually, I used these mics for quite a while. But then I started to notice that during quiet times, there was a significant "hiss" in the audio signal. This is because it is, in terms of audio microphones, not very sensitive (-63dB). In order to hear the signal at a decent level, I had to add 60dB to 70dB of gain in the WM8960, which also can add some hiss to the signal.                       

            </td>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;">AOM-5035L
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">135dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">75dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">-35dB
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;">The best combination of high AOP, impressive sensitivity and SNR. No clipping and no hiss. This one fits the job!                    

            </td>
        </tr>
    </table>
</div>

<h3 id="options">Options<a class="headerlink" href="#options" title="Permanent link"></a></h3>
<p>Here are the four microphones we ultimately tested. Note, although for our application, the AOM-5035 was the right choice, you might like to consider trying out some of the other mics and see if they work for your use case. If I were making these for playing piano or any kind of quieter environment, I might go with one of the MEMs.</p>
<div class="grid cards col-4">
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/18011">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/1/7/2/2/1/18011-SparkFun_Analog_MEMS_Microphone_Breakout_-_ICS-40180-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="SparkFun Analog MEMS Microphone Breakout - ICS-40180">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/18011">
  <b>SparkFun Analog MEMS Microphone Breakout - ICS-40180</b>
  <br />
  BOB-18011
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/19389">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/1/9/0/2/5/19389-SparkFun_Analog_MEMS_Microphone_Breakout_-_SPH8878LR5H-1-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="SparkFun Analog MEMS Microphone Breakout - SPH8878LR5H-1">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/19389">
  <b>SparkFun Analog MEMS Microphone Breakout - SPH8878LR5H-1</b>
  <br />
  BOB-19389
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/21537">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/2/1/3/6/7/21537-_BOB-_01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="SparkFun Analog MEMS Microphone Breakout - VM2020">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/21537">
  <b>SparkFun Analog MEMS Microphone Breakout - VM2020</b>
  <br />
  BOB-21537
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.digikey.com/en/products/detail/pui-audio-inc/AOM-5035L-HD3-LW100-R/16585488">
      <figure markdown>
        <img src="../assets/img/AOM-5035L.jpg" style="width:140px; height:140px; object-fit:contain;" alt="PUI Audio AOM-5035L-HD3-LW100-R">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.digikey.com/en/products/detail/pui-audio-inc/AOM-5035L-HD3-LW100-R/16585488">
  <b>PUI Audio: MIC ANLG OMNI -35DB</b>
  <br />
  AOM-5035L-HD3-LW100-R
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
</div>
<h2 id="whats-next">What's next<a class="headerlink" href="#whats-next" title="Permanent link"></a></h2>
<p>The next generation of super headphones might include some additional features.
Here are some of my ideas:</p>
<h3 id="mic-signal-output">Mic Signal Output<a class="headerlink" href="#mic-signal-output" title="Permanent link"></a></h3>
<p>With an additional WM8960 codec, I could send a copy of the isolated ambient mics to a line-level output. This would be handy for recording. Especially, if I just want to get an idea down with decent sound quality. The movement of my head (particularly rotationally) plays into the sound, so this is not ideal for recording for a final mix, but super handy for practice recordings.</p>
<h3 id="advanced-audio-processing">Advanced Audio Processing<a class="headerlink" href="#advanced-audio-processing" title="Permanent link"></a></h3>
<p>It would be nice to take in the I2S audio from the codec and add some digital effects. For example EQ, compression and/or limiting could be very nice. I also find my carpeted basement to sound slightly tight. It would be killer to add in some reverb!</p>
<h3 id="additional-mics">Additional Mics<a class="headerlink" href="#additional-mics" title="Permanent link"></a></h3>
<p>I have thought that adding a second set of ambient mics with higher sensitivity could be a nice improvement. Although the current mics (PUI-AOM-5035) do great for loud environments, it is not 100% ideal for use in quieter environments. If you want to capture quieter sound sources (like acoustic instruments such as piano, guitar or even conversation), then a more sensitive microphone is better suited for the job. A more sensitive microphone requires less gain to capture the quieter sounds, and thus produces less noise in those situations.</p>
<p>Mixing the two microphones automatically would be ideal. But this would require a rather uncommon effect on the sensitive  mic. You'd have to use an "inverted" noise gate. This would shut down the signal from the sensitive mic when it gets close to its clipping level, and then open up the gate to the high AOP mic at the same time.</p>
<p>It turns out that PUI makes another similar microphone that is 11dB more sensitive, and has a whopping 80dB SNR! See the specs here:</p>
<div style="text-align: center"><a href="https://www.digikey.com/en/products/detail/pui-audio-inc/AOM-5024L-HD-F-R/12152286" target="pui_microphone" class="md-button">PUI AOM-5024</a></div>

<h2 id="custom-3d-printed-cans">Custom 3D Printed Cans!<a class="headerlink" href="#custom-3d-printed-cans" title="Permanent link"></a></h2>
<p>Currently, the generic headphones I have hacked are pretty comfy, but I do notice the pressure of the pads on my ears. When I’m drumming, I don’t seem to mind - probably because I’m so focused on playing. But for general listening, I start to become a bit uncomfortable after 30 minutes or so. My ears are pretty long (I guess), and they angle out away from my head, so these headphones are essentially squishing my ears against my skull.</p>
<p>I've already begun the journey to creating some very custom headphones. I think that I should be able to make something that still has a really good seal to block out the loud sounds, but also is super comfy. I’ll probably make some for my kid too, because he needs to take breaks due to the ear-muffs causing some discomfort.</p>
<p>The basic idea I have is to scan in my head, then design some custom fit headphones.  Ideally, the cans and internal speaker drivers wouldn't touch my ears at all. Also, the touch points around my ears would have a custom adapter that would apply equal pressure all around.</p>
<p>It has started with a decent scan using photogrammetry. To learn more about this
process, check out this wonderful YouTube video by Punished Props Academy:</p>
<div align="center" class="grid cards">
<ul>
<li>
<p><a href="https://youtu.be/N3UvJW0HK4g?si=4_7vV_jP4GE8sXIP">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/N3UvJW0HK4g?si=CjioR-8vK7SF32ar" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></p>
<hr />
<p><strong>A great tutorial video on photogrammetry</strong></a></p>
</li>
</ul>
</div>
<p>After following along with that video, and doing a few practice scans, I was able
to successfully scan my head.</p>
<p>Then it is only a matter of importing the mesh into Fusion 360 and designing around the model of my head and ears.</p>
<p>Going into detail about how this is all done is beyond the scope of this tutorial, but I thought I'd share some of the photos from the design work that is currently still in progress.</p>
<p>Cheers and happy hacking!</p>
<div class="grid cards col-4">
<ul>
<li><a href="../assets/img/pete_rotate2.gif">
      <figure markdown>
        <img src="../assets/img/pete_rotate2.gif" style="width:300px; height:252px; object-fit:contain;" alt="rotating pete">
      </figure>
    </a></li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li><a href="../assets/img/custom1.png">
      <figure markdown>
        <img src="../assets/img/custom1_300wide.png" style="width:300px; height:252px; object-fit:contain;" alt="custom headphones 1">
      </figure>
    </a></li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li><a href="../assets/img/custom2.png">
      <figure markdown>
        <img src="../assets/img/custom2_300wide.png" style="width:300px; height:252px; object-fit:contain;" alt="custom headphones 2">
      </figure>
    </a></li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
</div>
<figure>
<p><a href="../assets/img/3d_print.jpg" title="Click to enlarge"><img alt="Headphones" src="../assets/img/3d_print_600wide.jpg" width="600" /></a></p>
<figcaption>
<p>My first print... fresh out of the gray goop!</p>
</figcaption>
</figure>
<h1 id="troubleshooting-tips">Troubleshooting Tips<a class="headerlink" href="#troubleshooting-tips" title="Permanent link"></a></h1>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><p><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> <strong>Not working as expected and need help? </strong></p>
<p>If you need technical assistance and more information on a product that is not working as you expected, we recommend heading on over to the <a href="https://www.sparkfun.com/technical_assistance">SparkFun Technical Assistance</a> page for some initial troubleshooting.</p>
<center>
<a class="md-button md-button--primary" href="https://www.sparkfun.com/technical_assistance">SparkFun Technical Assistance Page</a>
</center>
<p>If you can't find what you need there, you'll need a <a href="https://forum.sparkfun.com/ucp.php?mode=register">Forum Account</a> to search product forums and post questions.<p></p>
</div>
<h1 id="resources">Resources:<a class="headerlink" href="#resources" title="Permanent link"></a></h1>
<!-- This section should include all the relevant documentation and product files (Eagle files, schematic, datasheet(s), landing pages, etc. and any relevant tutorials to go beyond the Hookup Guide.) -->

<p>For more resources related to this project, check out the links listed here:</p>
<ul>
<li>General<ul>
<li><a href="../assets/code/Super_Headphones_BT_and_MIC_V2.0.zip">Arduino Code</a> (ZIP)</li>
<li><a href="../assets/img/Super_Headphones_Block_Diagram_v01.jpg">Block Diagram</a> (JPG)</li>
<li><a href="../assets/img/SuperHeadphones_Wiring_Diagram.jpg">Wiring Diagram</a> (JPG)</li>
<li><a href="../assets/img/mic_circuit.png">Mic Circuit</a> (PNG)</li>
<li><a href="../assets/component_documentation/PUI_Audio_AOM-5035L-HD3-LW100-R.pdf">AOM-5035 Microphone Datasheet</a> (PDF)</li>
<li><a href="../assets/component_documentation/AN-1112-v1.1.pdf">App Note on Mic Specs AN-1112-v1.1</a> (PDF)</li>
</ul>
</li>
<li>Custom Mother-board PCB<ul>
<li><a href="../assets/board_files/Super_Headphones_Schematic_v20.pdf">Schematic</a> (PDF)</li>
<li><a href="../assets/board_files/Super_Headphones_Eagle_Files_v20.zip">Eagle Files</a> (ZIP)</li>
<li><a href="../assets/board_files/Super_Headphones_Dimensions.png">Board Dimensions</a> (PNG)</li>
<li><a href="../assets/board_files/Super_Headphones_Dimensions.pdf">Board Dimensions</a> (PDF)</li>
<li><a href="../assets/board_files/Super_Headphones_Dimensions.dxf">Board Dimensions</a> (DXF)</li>
</ul>
</li>
<li>Audio Codec<ul>
<li><a href="https://www.sparkfun.com/products/21250">SparkFun Audio Codec Breakout - WM8960 (Qwiic) [BOB-21250]</a></li>
<li><a href="https://learn.sparkfun.com/tutorials/audio-codec-breakout---wm8960-hookup-guide">Hookup Guide</a></li>
<li><a href="https://github.com/sparkfun/SparkFun_Audio_Codec_Breakout_WM8960">GitHub Hardware Repo</a></li>
<li><a href="https://github.com/sparkfun/SparkFun_WM8960_Arduino_Library">Arduino Library</a></li>
<li><a href="https://www.youtube.com/embed/NvHIXSyEeDA">SFE WM8960 Product Showcase</a></li>
</ul>
</li>
<li>ESP32 Thing Plus<ul>
<li><a href="https://www.sparkfun.com/products/20168">SparkFun Thing Plus - ESP32 WROOM (USB-C) [WRL-20168]</a></li>
<li><a href="https://learn.sparkfun.com/tutorials/esp32-thing-plus-usb-c-hookup-guide">Hookup Guide</a></li>
<li><a href="https://github.com/sparkfun/SparkFun_Thing_Plus_ESP32_WROOM_C">GitHub Hardware Repo</a></li>
</ul>
</li>
</ul>
<p>Looking for more information related to the SuperHeadphones, check out the following IEEE article below!</p>
<div class="grid cards col-4">
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://spectrum.ieee.org/hi-fi-ear-defenders">
      <figure markdown>
        <img src="../assets/img/a-pair-headphones-sitting-on-a-drum-set-with-embedded-microphones-on-each-side.webp" style="width:264px; height:148px; object-fit:contain;" alt="IEEE: Build Your Own Hi-fi Ear Defenders > An inexpensive solution to hearing well in loud environments"&gt;
      </figure>
    </a></p>
<hr />
<p><a href="https://spectrum.ieee.org/hi-fi-ear-defenders">
  <b>IEEE: Build Your Own Hi-fi Ear Defenders &gt; <br />An inexpensive solution to hearing well in loud environments</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2025-02-19T17:36:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-02-19</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2025-02-19T17:36:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-02-19</span>
  </span>

    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:ho.chan@colorado.edu">bboyho</a>
    </nav>
  </span>

    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="Contributors">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/bboyho" class="md-author" title="@bboyho">
          
          <img src="https://avatars.githubusercontent.com/u/3209977?v=4&size=72" alt="bboyho">
        </a>
      
        <a href="https://github.com/lewispg228" class="md-author" title="@lewispg228">
          
          <img src="https://avatars.githubusercontent.com/u/601236?v=4&size=72" alt="lewispg228">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>


  


  



                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2023 - <a href="https://www.sparkfun.com/" target="_blank" rel="noopener">SparkFun Electronics&#174;</a><br> <a href="https://goo.gl/maps/vkstCpQZW6jZMjzYA" target="_blank" rel="noopener">6333 Dry Creek Parkway, Niwot, Colorado 80503</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.sparkfun.com/" target="_blank" rel="noopener" title="www.sparkfun.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/sparkfun" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/sparkfun" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141m0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7m146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8m76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.github.com/sparkfun" target="_blank" rel="noopener" title="www.github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/SparkFun" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/sparkfun" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
    <a href="./#__consent" target="_blank" rel="noopener" title="Change cookie settings" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M257.5 27.6c-.8-5.4-4.9-9.8-10.3-10.6-22.1-3.1-44.6.9-64.4 11.4l-74 39.5c-19.7 10.5-35.6 27-45.4 47.1l-36.7 75.6c-9.8 20.1-13 42.9-9.1 64.9l14.5 82.8c3.9 22.1 14.6 42.3 30.7 57.9l60.3 58.4c16.1 15.6 36.6 25.6 58.7 28.7l83 11.7c22.1 3.1 44.6-.9 64.4-11.4l74-39.5c19.7-10.5 35.6-27 45.4-47.2l36.7-75.5c9.8-20.1 13-42.9 9.1-64.9-.9-5.3-5.3-9.3-10.6-10.1-51.5-8.2-92.8-47.1-104.5-97.4-1.8-7.6-8-13.4-15.7-14.6-54.6-8.7-97.7-52-106.2-106.8zM208 144a32 32 0 1 1 0 64 32 32 0 1 1 0-64m-64 192a32 32 0 1 1 64 0 32 32 0 1 1-64 0m224-64a32 32 0 1 1 0 64 32 32 0 1 1 0-64"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  


  




<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
          
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "content.code.select", "content.action.edit", "navigation.footer", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.path"], "search": "../assets/javascripts/workers/search.c7c1ca2c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a789024.min.js"></script>
      
        <script src="../js/timeago.min.js"></script>
      
        <script src="../js/timeago_mkdocs_material.js"></script>
      
        <script src="../javascript/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>